<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
     Python3笔记(03函数) - TIME TO GO 
  </title>
   
  <link href="atom.xml" rel="alternate" title="TIME TO GO" type="application/atom+xml">
  <link rel="stylesheet" href="asset/css/foundation.min.css" />
  <link rel="stylesheet" href="asset/css/docs.css" />
  <script src="asset/js/vendor/modernizr.js"></script>
  <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
  <script type="text/javascript">
    function before_search() {
      var searchVal = 'site: ' + document.getElementById('search_input').value;
      document.getElementById('search_q').value = searchVal;
      return true;
    }
  </script>
</head>

<body class="antialiased hide-extras">
  <div class="marketing off-canvas-wrap" data-offcanvas>
    <div class="inner-wrap">


      <nav class="top-bar docs-bar hide-for-small" data-topbar>
        <section class="top-bar-section">
          <div class="row">
            <div style="position: relative;width:100%;">
              <div style="position: absolute; width:100%;">
                <ul id="main-menu" class="left">
                  
                  <li id="">
                    <a target="self" href="index.html">Home</a>
                  </li>
                  
                  <li id="">
                    <a target="_self" href="archives.html">Archives</a>
                  </li>
                  
                </ul>
                <ul class="right" id="search-wrap">
                  <li>
                    <form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
                      <input type="hidden" id="search_q" name="q" value="" />
                      <input tabindex="1" type="search" id="search_input" placeholder="Search" />
                    </form>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </nav>

      <nav class="tab-bar show-for-small">
        <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
          <span> &nbsp; TIME TO GO</span>
        </a>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li>
            <a href="index.html">HOME</a>
          </li>
          <li>
            <a href="archives.html">Archives</a>
          </li>
          <li>
            <a href="about.html">ABOUT</a>
          </li>
          <li>
            <label>Categories</label>
          </li>
          
        </ul>
      </aside>
      <a class="exit-off-canvas" href="#"></a>
      <section id="main-content" role="main" class="scroll-container"> <script type="text/javascript">
  $(function () {
    $('#menu_item_index').addClass('is_active');
    $('#sidebar').parent().parent().hide();
  });
</script>

<div class="row">
  <div class="large-12 medium-12 columns">
    <div class="markdown-body article-wrap">

      <div class="article">
        
        <h1>Python3笔记(03函数)</h1>
        <div class="read-more clearfix">
          <span class="date">2017/12/7</span>
           
          <span class="comments">
             
          </span>
        </div>
      </div>

      <div class="article-content">
        <ul>
<li>
<a href="#toc_0">03. 函数</a>
<ul>
<li>
<a href="#toc_1">3.1 基本函数</a>
</li>
<li>
<a href="#toc_2">3.2 自定义函数</a>
</li>
<li>
<a href="#toc_3">3.3 参数检查</a>
</li>
<li>
<a href="#toc_4">3.4 返回多值</a>
</li>
<li>
<a href="#toc_5">3.5 函数的参数</a>
</li>
<li>
<a href="#toc_6">3.6 递归函数</a>
</li>
</ul>
</li>
</ul>


<h4 id="toc_0">03. 函数</h4>

<h5 id="toc_1">3.1 基本函数</h5>

<ul>
<li>取绝对值abs()、取最大值max()、min()、sum()，注意传入的参数格式及个数(也可以是一个数组)</li>
<li>类型转换函数，如int()、float()、str()、bool()</li>
<li>函数名是指向一个函数对象的引用，可以将函数名赋值给一个变量，相当于给函数起个“别名”，例如 <code>a = abs \n a = &#39;abc&#39;</code></li>
<li><strong>hex()函数：将一个整数转为16进制的字符串，例如hex(65) # &#39;0x41&#39;</strong></li>
<li><strong>注意：</strong>

<ul>
<li><strong>&#39;\u4e2d&#39;：加\u前缀的16进制的的特殊字符串（Unicode编码值），表示对应字符（串）</strong></li>
<li><strong>b&#39;\xe4&#39;：加“b”前缀的16进制的特殊字符串，表示字节数据</strong></li>
<li><strong>&#39;0x41&#39;：表示一个数字的16进制的字符串</strong></li>
</ul></li>
</ul>

<span id="more"></span><!-- more -->

<h5 id="toc_2">3.2 自定义函数</h5>

<ul>
<li>使用“def”关键字定义，后面依次是函数名、括号及参数、冒号:，之后在下面的缩进块中编写函数体，返回值使用return返回</li>
<li><p>若无值需要返回，则可省略return语句，其实也是有返回结果，值为None；return None可简写为return或不写</p>

<pre><code class="language-python">def my_abs(x):
    if x &gt; 0:
        return x
    else:
        return -x
</code></pre></li>
<li><p>若在交互模式中定义函数，定义结束后需要敲两次回车才会回到“&gt;&gt;&gt;”</p></li>
<li><p>若将my_abs()函数定义在myfile.py文件中，则应在该文件目录下启动python解释器，之后使用 <code>from myfile import my_abs</code> 语句来导入my_abs()函数；注意myfile不包含.py后缀名</p></li>
<li><p>空函数：定义一个什么都不做的函数，使用pass关键字占位（让程序可以正常运行，否则由于无法识别代码块范围而报错）</p>

<pre><code class="language-python">def nop():
    pass
</code></pre></li>
<li><p>pass关键字也可以用在其他语句中</p>

<pre><code class="language-python">if age &gt;= 18:
    pass
</code></pre></li>
</ul>

<h5 id="toc_3">3.3 参数检查</h5>

<ul>
<li>调用自定义函数时，若传入“参数个数”错误，Python解释器可以自动检查出来，若传入“参数类”型错误，Python解释器无法自动检查出来</li>
<li><p>可以使用isinstance()内置函数进行数据类型检查，若传入参数类型错误可以手动抛出一个“异常”</p>

<pre><code class="language-python">def my_abs(x):
    if not isinstance(x, (int, float)):
        raise TypeError(&#39;Bad Type~~~&#39;)
    if x &gt; 0:
        return x
    else:
        return -x
</code></pre></li>
</ul>

<h5 id="toc_4">3.4 返回多值</h5>

<ul>
<li>Python函数返回值始终是单一值，表面为多值的其实是一个tuple对象；在语法上，返回一个tuple对象可以省略其括号</li>
<li><p>多个变量可以同时接收一个tuple对象，会按位进行赋值</p>

<pre><code class="language-python">import math
def move(x, y, step, angle = 0):
    nx = x + step * math.cos(angle)
    ny = y + step * math.sin(angle)
    return nx, ny
</code></pre>

<pre><code class="language-python">import math
from abstest import move

x, y = move(100, 200, 50, math.pi / 6)
print (x, y) # 143.30127018922195 225.0
r = move(100, 200, 50, math.pi/6)
print(r) # (143.30127018922195, 225.0)
</code></pre></li>
<li><p>练习：解一元二次方程</p>

<pre><code class="language-python">import math

def quadratic(a, b, c):
    if not isinstance(a, (int, float)):
        raise TypeError(参数a类型错误...&#39;)
    if not isinstance(b, (int, float)):
        raise TypeError(&#39;参数b类型错误...&#39;)
    if not isinstance(c, (int, float)):
        raise TypeError(&#39;参数c类型错误...&#39;)

    dl = b * b - 4 * a * c
    if dl &lt; 0:
        print(&#39;无解...&#39;)
        return

    x1 = (-b + math.sqrt(dl)) / 2 * a
    x2 = (-b - math.sqrt(dl)) / 2 * a
    print(&#39;x1 = %f, x2 = %f&#39; % (x1, x2))
    return x1, x2
</code></pre></li>
</ul>

<h5 id="toc_5">3.5 函数的参数</h5>

<ul>
<li>a. 位置参数

<ul>
<li>必须传入</li>
</ul></li>
<li>b. 默认参数

<ul>
<li>给“位置参数”、“命名关键字参数”添加默认值，简化函数调用</li>
<li>定义时，位置参数在前，默认参数在后；调用时，可不按定义时的参数顺序传入但需提供参数名</li>
<li>参数数据必须是不可变的，否则可能出现数据错误；（不可变对象在多任务环境下读取不需要加锁）</li>
</ul></li>
<li>c. 可变参数

<ul>
<li>定义时，参数名前加*表示接收任意个参数（可以0个），调用时，传入的数据会先被封装成tuple对象，之后再传入</li>
<li>在list、tuple、set（dict不可以）对象前加*，表示将其中的元素变为可变参数数据，用于传入使用</li>
</ul></li>
<li>d. 关键字参数

<ul>
<li>有助于扩展函数的功能</li>
<li>定义时，参数名前加**表示接收任意个<strong>必须</strong>含有参数名的参数数据（可以0个），调用时，传入的数据会先被封装成dict对象，之后再传入使用</li>
<li>在dict对象前加**，表示将其中的元素变为关键字参数数据，用于传入使用；对新封装dict的修改不会对原dict产生影响</li>
<li>调用时，传入的参数名不要加“&#39;”（引号），否则报错（注意：传入的数据是变量参数名及其值，不是dict对象，之后才被封装成dict对象）</li>
</ul></li>
<li>e. 命名关键字参数

<ul>
<li>关键字参数无法限制参数的名称，使用命名关键字参数可以解决此问题</li>
<li>定义时，使用*,（将*,看成一个整体），之后是关键字参数名，<strong>调用时，必须传入定义的关键字参数名及值，否则报错</strong></li>
<li>命名关键字参数也可以使用默认参数，此时调用时可不传入该参数</li>
</ul></li>
<li><p>参数组合</p>

<ul>
<li>定义函数时可以使用位置参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数可组合使用，<strong>但无法混合使用“可变参数”和“命名关键字参数”</strong></li>
<li><strong>参数定义的顺序：位置参数、默认参数、可变参数/命名关键字参数、关键字参数；调用时，传入参数的顺序和定义的顺序在某些情况下可不一致</strong></li>
</ul></li>
<li><p><strong>注意：在调用时，传入的命名关键字参数、关键字参数的参数名称不要和函数定义时的位置参数、默认参数的参数名称冲突，否则报错或传入的数据位置对应错误</strong></p>

<pre><code class="language-python"># 默认参数1:
&gt;&gt;&gt; def enroll(name, gender, age = 6, city=&#39;Beijing&#39;):
...     print(&#39;name:&#39;, name)
...     print(&#39;gender:&#39;, gender)
...     print(&#39;age:&#39;, age)
...     print(&#39;city:&#39;, city)
...
&gt;&gt;&gt; enroll(&#39;Tom&#39;, &#39;F&#39;)
name: Tom
gender: F
age: 6
city: Beijing
&gt;&gt;&gt; enroll(&#39;Tom&#39;, &#39;F&#39;, 7)
name: Tom
gender: F
age: 7
city: Beijing
&gt;&gt;&gt; enroll(&#39;Tom&#39;, &#39;F&#39;, city=&#39;Tianjin&#39;) # 需提供参数名
name: Tom
gender: F
age: 6
city: Tianjin

# 默认参数2:（默认参数为可变对象，可能导致数据错误）
&gt;&gt;&gt; def add_end(L=[]):
...     L.append(&#39;END&#39;)
...     return L
...
&gt;&gt;&gt; add_end([1, 2, 3])  # L指向新的数组
[1, 2, 3, &#39;END&#39;] # 正确
&gt;&gt;&gt; add_end([1, 2, 3])  # L指向新的数组
[1, 2, 3, &#39;END&#39;] # 正确
&gt;&gt;&gt; add_end()  # L指向函数定义时系统默认计算出的数组
[&#39;END&#39;] # 正确
&gt;&gt;&gt; add_end()  # L指向函数定义时系统默认计算出的数组
[&#39;END&#39;, &#39;END&#39;] # 错误
</code></pre>

<pre><code class="language-python"># 可变参数:
&gt;&gt;&gt; def calc(*nums):
...     sum = 0
...     for n in nums:
...         sum += n * n
...     return sum
...
&gt;&gt;&gt; calc(1, 2, 3)
14
&gt;&gt;&gt; calc(1, 2)
5
&gt;&gt;&gt; calc()
0
&gt;&gt;&gt; ns = [1, 2, 3, 4]
&gt;&gt;&gt; calc(ns[0], ns[1], ns[2], ns[3])
30
&gt;&gt;&gt; calc(*ns) # 快捷方式
30
&gt;&gt;&gt; s = set([1, 2, 3])
&gt;&gt;&gt; calc(*s)
14
</code></pre>

<pre><code class="language-python"># 关键字参数:
&gt;&gt;&gt; def person(name, age, **kw):
...     print(&#39;name:&#39;, name, &#39;age:&#39;, age, &#39;other:&#39;, kw)
&gt;&gt;&gt; person(&#39;Tom&#39;, 20, city=&#39;Beijing&#39;, job = &#39;Student&#39;)
name: Tom age: 20 other: {&#39;job&#39;: &#39;Student&#39;, &#39;city&#39;: &#39;Beijing&#39;}
&gt;&gt;&gt; d = {&#39;A&#39;: 1, &#39;B&#39;: 2}
&gt;&gt;&gt; person(&#39;Tom&#39;, 20, A=d[&#39;A&#39;], B=d[&#39;B&#39;]) # 传入的参数名不要加“&#39;”（引号）
name: Tom age: 20 other: {&#39;A&#39;: 1, &#39;B&#39;: 2}
&gt;&gt;&gt; person(&#39;Tom&#39;, 20, **d)
name: Tom age: 20 other: {&#39;A&#39;: 1, &#39;B&#39;: 2}
</code></pre>

<pre><code class="language-python"># 命名关键字参数:
&gt;&gt;&gt; def person(name, age, *, city, job): 
...     print(name, age, city, job)
&gt;&gt;&gt; person(&#39;Tom&#39;, 12, city=&#39;Beijing&#39;, job=&#39;Student&#39;)
Tom 12 Beijing Student
&gt;&gt;&gt; person(&#39;Tom&#39;, 12, city=&#39;Beijing&#39;, haha=&#39;Student&#39;) 
# 报错，TypeError: person() got an unexpected keyword argument &#39;haha&#39;
&gt;&gt;&gt; person(&#39;Tom&#39;, 12, &#39;Beijing&#39;, &#39;Student&#39;)
# 报错，TypeError: person() takes 2 positional arguments but 4 were given
</code></pre>

<pre><code class="language-python"># 组合参数:
&gt;&gt;&gt; def f1(a, b, c=0, *args, **kw):
...     print(&#39;a =&#39;, a, &#39;b =&#39;, b, &#39;c =&#39;, c, &#39;args =&#39;, args, &#39;kw =&#39;, kw)
...
&gt;&gt;&gt; def f2(a, b, c=0, *, d, **kw):
...     print(&#39;a =&#39;, a, &#39;b =&#39;, b, &#39;c =&#39;, c, &#39;d =&#39;, d, &#39;kw =&#39;, kw)
...
&gt;&gt;&gt;

&gt;&gt;&gt; f1(1, 2, 3)
a = 1 b = 2 c = 3 args = () kw = {}

&gt;&gt;&gt; f1(1, 2, c=4)
a = 1 b = 2 c = 4 args = () kw = {}

&gt;&gt;&gt; f1(1, 3, 3, 5, d = 4)
a = 1 b = 3 c = 3 args = (5,) kw = {&#39;d&#39;: 4}

&gt;&gt;&gt; f2(1, 2, c = 3, e = 5, d = 4)
a = 1 b = 2 c = 3 d = 4 kw = {&#39;e&#39;: 5}

&gt;&gt;&gt; args = (1, 2, 3)
&gt;&gt;&gt; kw = {&#39;d&#39; : 99, &#39;x&#39; : &#39;#&#39;}
&gt;&gt;&gt; f1(*args, **kw)
a = 1 b = 2 c = 3 args = () kw = {&#39;x&#39;: &#39;#&#39;, &#39;d&#39;: 99}

# 对于任意函数，无论其参数是如何定义的，都可以通过类似func(*args, **kw)的形式调用它
&gt;&gt;&gt; f2(*args, **kw)
a = 1 b = 2 c = 3 d = 99 kw = {&#39;x&#39;: &#39;#&#39;}
</code></pre></li>
</ul>

<h5 id="toc_6">3.6 递归函数</h5>

<ul>
<li>在函数内部调用自身</li>
<li>函数的调用是通过栈实现的，当进入一个函数的调用时，栈就会加一层栈帧，当函数返回时，栈就会减一层栈帧；使用递归函数要防止栈溢出</li>
<li>尾递归：在函数返回时，调用自身并且return语句不能包含表达式；这样编译器、解释器就可以将尾递归做优化，使递归无论调用多少次都只占用一个栈帧</li>
<li>可以通过“尾递归”解决递归调用栈溢出问题；但是多数编程语言没有对尾递归做优化，Python解释器也没有做优化</li>
<li><p>可以将循环看成是一种特殊的尾递归；尾递归事实上和循环是等价的，没有循环语句的编程语言只能通过尾递归实现循环</p>

<pre><code class="language-python"># 递归
def fact(n):
   if n == 1:
       return 1
   return n * fact(n - 1)

# 尾递归
def fact(n):
   return fact_iter(n, 1)

def fact_iter(num, product):
   if num == 1:
       return product
   return fact_iter(num - 1, num * product)
</code></pre></li>
<li><p>练习：汉诺塔</p>

<pre><code class="language-python">def move(n, a, b, c):
   if 1 == n:
       print(a, &#39;--&gt;&#39;, c) # 直接将从a移到c
   else:
       move(n - 1, a, c, b) # 先将前n-1个从a移到b
       move(1, a, b, c) # 将最后一个从a移到c
       move(n - 1, b, a, c) # 将前n-1个从b移到c
</code></pre></li>
</ul>

      </div>

      <div class="row">
        <div class="large-6 columns">
          <p class="text-left" style="padding:15px 0px;">
            
            <a href="15125773961791.html" title="Previous Post: Python3笔记(04特性)">&laquo; Python3笔记(04特性)</a>
            
          </p>
        </div>
        <div class="large-6 columns">
          <p class="text-right" style="padding:15px 0px;">
            
            <a href="15125773961684.html" title="Next Post: Python3笔记(01简介、02基础)">Python3笔记(01简介、02基础) &raquo;</a>
            
          </p>
        </div>
      </div>

      <div class="comments-wrap">
        <div class="share-comments">
            
        </div>
      </div>

    </div>
  </div> <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">

      <div id="site-info" class="site-info">
        
        <h1>TIME TO GO</h1>
        <div class="site-des">It is just a matter of time.</div>
        <div class="social">
                    
          <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
        </div>
      </div>

      

      <div id="site-categories" class="side-item ">
        <div class="side-header">
          <h2>Categories</h2>
        </div>
        <div class="side-content">
          <p class="cat-list">
            
          </p>
        </div>
      </div>

      <div id="site-categories" class="side-item">
        <div class="side-header">
          <h2>Recent Posts</h2>
        </div>
        <div class="side-content">
          <ul class="posts-list">
              <li class="post">
              <a href="15428122799005.html">NCE2 Unit 03（Lesson49 ~ 56）</a>
              </li>
                 <li class="post">
              <a href="15416904024187.html">NCE2 Unit 02（Lesson41 ~ 48）</a>
              </li>
                 <li class="post">
              <a href="15410846265758.html">NCE2 Unit 02（Lesson33 ~ 40）</a>
              </li>
                 <li class="post">
              <a href="15404876438980.html">NCE2 Unit 02（Lesson25 ~ 32）</a>
              </li>
                 <li class="post">
              <a href="15400455330748.html">英语语法常见问题</a>
              </li>
                                             
          </ul>
        </div>
      </div>

    </div>
  </div>
</div>

</div> <div class="page-bottom clearfix">
  <div class="row">
    <p class="copyright">Copyright &copy; 2015 Powered by
      <a target="_blank" href="">ME</a>
    </p>
  </div>
</div>
</section>

</div>
</div>

 
<script src="asset/js/foundation.min.js"></script>
<script>
  $(document).foundation();
  function fixSidebarHeight() {
    var w1 = $('.markdown-body').height();
    var w2 = $('#sidebar').height();
    if (w1 > w2) { $('#sidebar').height(w1); };
  }
  $(function () {
    fixSidebarHeight();
  })
  $(window).load(function () {
    fixSidebarHeight();
  });
</script>   
</body>

</html>